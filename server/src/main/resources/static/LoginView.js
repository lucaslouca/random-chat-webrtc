import{d as V,y as K,a as f,b as k,c as a,e as g,f as e,n as S,u as n,w as C,z as L,t as N,k as u,B as b,j as l,h as T,i as x,q as U,s as A,A as P,v as I,_ as z}from"./index.js";import{S as D}from"./SpinnerComp.js";const v=r=>(U("data-v-48cfc1f1"),r=r(),A(),r),M={id:"login-component-container"},R={id:"center-cell"},j=v(()=>e("div",{class:"m-logo-container"},null,-1)),q={key:0,id:"filed-container"},E=v(()=>e("h1",null,"Login",-1)),F=["onKeyup"],J=["onKeyup"],O=v(()=>e("span",null,"Login",-1)),$=[O],G={id:"validation-message"},H={id:"account-links"},Q={id:"container"},W=V({__name:"LoginComp",emits:["authenticated"],setup(r,{emit:h}){const w=K(),o={username:null,password:null};let s=f(!1),c=f(void 0),d=f(!1);function B(y,i){s.value=!0,P.login(y,i).then(function(t){console.log("[Login] Response: ",t),localStorage.setItem("user",JSON.stringify(t.data)),console.log("[Login] Stored:",localStorage.getItem("user")),h("authenticated",!0),w.replace({path:"members/dashboard",params:{username:"foobar"}})}).catch(function(t){console.log(t.response.status);var _=t.response;s.value=!1,t.value=!0,setTimeout(function(){t.value=!1},500),c.value=_.data.error_description})}function p(){o.username&&o.password?B(o.username,o.password):(d.value=!0,setTimeout(function(){d.value=!1},500),c.value="A username and password must be present")}return(y,i)=>{const t=k("router-link"),_=k("router-view");return a(),g("div",M,[e("div",R,[j,e("div",{id:"login",class:S({shake:n(d)===!0})},[n(s)?l("",!0):(a(),g("div",q,[E,C(e("input",{type:"text",name:"username",class:"input-field","onUpdate:modelValue":i[0]||(i[0]=m=>o.username=m),placeholder:"Username",onKeyup:L(p,["enter"])},null,40,F),[[I,o.username]]),C(e("input",{type:"password",name:"password",class:"input-field","onUpdate:modelValue":i[1]||(i[1]=m=>o.password=m),placeholder:"Password",onKeyup:L(p,["enter"])},null,40,J),[[I,o.password]]),e("div",{class:"button-container"},[e("button",{type:"button",class:"button",onClick:p},$)]),e("span",G,N(n(c)),1),e("span",H,[n(s)?l("",!0):(a(),u(t,{key:0,to:"/signup"},{default:b(()=>[x(" Sign Up ")]),_:1})),n(s)?l("",!0):(a(),u(t,{key:1,to:"/resetpassword"},{default:b(()=>[x(" Forgot Password ")]),_:1}))])])),n(s)?(a(),u(D,{key:1})):l("",!0),n(s)?(a(),g("h1",{key:2,class:S({loading:n(s)===!0})},"Logging in...",2)):l("",!0)],2),e("div",Q,[T(_)])])])}}});const X=z(W,[["__scopeId","data-v-48cfc1f1"]]),ee=V({__name:"LoginView",setup(r){return(h,w)=>(a(),u(X))}});export{ee as default};
