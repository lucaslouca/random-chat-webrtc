import{d as x,y as T,a as h,c as u,e as d,f as n,n as w,u as l,w as m,t as y,j as g,k as C,q as V,s as P,A as k,v as _,_ as B}from"./index.js";import{S as O}from"./SpinnerComp.js";const f=i=>(V("data-v-a5a3c682"),i=i(),P(),i),A={id:"login-component-container"},E={id:"center-cell"},N={key:0},D=f(()=>n("h1",null,"Sign Up",-1)),L={class:"button-container"},M=f(()=>n("span",null,"Sign Up",-1)),j=[M],q={id:"validation-message"},z=f(()=>n("div",{class:"clearfix"},null,-1)),J=x({__name:"SignupComp",emits:["authenticated"],setup(i,{emit:S}){const v=T(),s={username:null,password:null,email:null};let o=h(!1),p="",c="",r=h(!1);function U(t){o.value=!0,console.log("[Signup] POST user ",t),c="Signing up...",k.register(t.username,t.password,t.email).then(function(a){console.log("[Signup] POST user response",a);var e=a.data;e.success?b(t.username,t.password):(o.value=!1,r.value=!0,setTimeout(function(){r.value=!1},500),p=e.message)})}function b(t,a){o.value=!0,c="Logging in...",k.login(t,a).then(function(e){console.log("[Signup] Login response: ",e),localStorage.setItem("user",JSON.stringify(e.data)),console.log("[Signup] Stored:",localStorage.getItem("user")),S("authenticated",!0),v.replace({path:"members/dashboard"})}).catch(function(e){console.log("[Signup] Error logging in: ",e.response)})}function I(){if(s.email&&s.password&&s.email){var t={username:s.username,email:s.email,password:s.password};U(t)}else r.value=!0,setTimeout(function(){r.value=!1},500),p="An email and password must be present"}return(t,a)=>(u(),d("div",A,[n("div",E,[n("div",{id:"login",class:w({shake:l(r)===!0})},[l(o)?g("",!0):(u(),d("div",N,[D,m(n("input",{type:"text",name:"username",class:"input-field","onUpdate:modelValue":a[0]||(a[0]=e=>s.username=e),placeholder:"Username"},null,512),[[_,s.username]]),m(n("input",{type:"password",name:"password",class:"input-field","onUpdate:modelValue":a[1]||(a[1]=e=>s.password=e),placeholder:"Password"},null,512),[[_,s.password]]),m(n("input",{type:"text",name:"email",class:"input-field","onUpdate:modelValue":a[2]||(a[2]=e=>s.email=e),placeholder:"E-mail"},null,512),[[_,s.email]]),n("div",L,[n("button",{type:"button",class:"button primary",onClick:I},j),n("span",q,y(l(p)),1)]),z])),l(o)?(u(),C(O,{key:1})):g("",!0),l(o)?(u(),d("h1",{key:2,class:w({loading:l(o)===!0})},y(l(c)),3)):g("",!0)],2)])]))}});const R=B(J,[["__scopeId","data-v-a5a3c682"]]),G=x({__name:"SignupView",setup(i){return(S,v)=>(u(),C(R))}});export{G as default};
